<h2 mat-dialog-title><mat-icon color="primary">settings</mat-icon><span>Settings</span></h2>

<mat-dialog-content>
    <form [formGroup]="settingsForm">
        <mat-form-field appearance="outline" color="primary">
            <mat-label>Username</mat-label>
            <input matInput type="text" formControlName="username" />
        </mat-form-field>
        <mat-form-field appearance="outline" color="primary">
            <mat-label>Current password</mat-label>
            <input matInput type="password" formControlName="current_password" />
            <mat-error *ngIf="getFormError('current_password') != null">{{
                getFormError('current_password')
            }}</mat-error>
        </mat-form-field>
        <div class="change_password" *ngIf="!changePassword">
            Password
            <span [class]="!saving ? 'link' : ''" (click)="!saving ? (changePassword = true) : null">Change</span>
        </div>
        <ng-container *ngIf="changePassword">
            <mat-form-field appearance="outline" color="primary">
                <mat-label>Password</mat-label>
                <input matInput type="password" formControlName="password" />
            </mat-form-field>
            <mat-form-field appearance="outline" color="primary">
                <mat-label>Repeat password</mat-label>
                <input matInput type="password" formControlName="password_confirm" />
                <mat-error *ngIf="getFormError('password_confirm') != null">{{
                    getFormError('password_confirm')
                }}</mat-error>
            </mat-form-field>
        </ng-container>
    </form>
</mat-dialog-content>

<mat-dialog-actions align="end">
    <button mat-flat-button mat-dialog-close [disabled]="saving">Cancel</button>
    <button mat-flat-button (click)="save()" color="primary" [disabled]="saving">Save changes</button>
</mat-dialog-actions>
